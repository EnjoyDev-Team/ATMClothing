const fs = require('fs');

const products = [
    {
        category: 'Thời trang nữ - Quần & Chân váy',
        slug: 'thoi-trang-nu-quan-chan-vay',
        name: 'Chân váy đen',
        price: '149.000',
        sale: '109.000',
        size: 'S',
        noteSize: 'Dưới 52kg',
        color: 'Đen',
        amount: 1,
        material: 'Vải',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '1/1.2.jpg',
        other_img: ['1/1.1.png', '1/1.2.jpg', '1/1.3.jpg'],
        status: 'Mới',
        description: 'Chân váy vải tuyết mưa dày dặn, có quần áo phía trong',
    },
    {
        category: 'Thời trang nữ - Quần & Chân váy',
        slug: 'thoi-trang-nu-quan-chan-vay',
        name: 'Chân váy chữ A vắt chéo',
        price: '149.000',
        sale: '109.000',
        size: 'S',
        noteSize: 'Dưới 52kg',
        color: 'Mix',
        amount: 1,
        material: 'Jeans',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '2.1/2.1.5.jpg',
        other_img: [
            '2.1/2.1.1.png',
            '2.1/2.1.2.jpg',
            '2.1/2.1.3.jpg',
            '2.1/2.1.4.jpg',
            '2.1/2.1.5.jpg',
            '2.1/2.1.6.jpg',
            '2.1/2.1.7.jpg',
        ],
        status: 'Mới',
        description: 'Chân váy phối 2 màu, có quần phía trong',
    },
    {
        category: 'Thời trang nữ - Quần & Chân váy',
        slug: 'thoi-trang-nu-quan-chan-vay',
        name: 'Chân váy xòe mix màu',
        price: '149.000',
        sale: '109.000',
        size: 'S',
        noteSize: 'Dưới 50kg',
        color: 'Jeans mix',
        amount: 1,
        material: 'Jeans',
        facility: [],
        img: '3.1/3.1.3.jpg',
        other_img: ['3.1/3.1.1.png', '3.1/3.1.2.jpg', '3.1/3.1.3.jpg', '3.1/3.1.4.jpg', '3.1/3.1.5.jpg'],
        status: 'Mới',
        description: 'Phía trong có quần bảo hộ',
    },
    {
        category: 'Thời trang nữ - Quần & Chân váy',
        slug: 'thoi-trang-nu-quan-chan-vay',
        name: 'Chân váy xẻ chéo',
        price: '149.000',
        sale: '109.000',
        size: 'L',
        noteSize: 'Dưới 65kg',
        color: 'Jeans',
        amount: 11,
        material: 'Jeans',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '4.1/4.1.2.jpg',
        other_img: ['4.1/4.1.1.png', '4.1/4.1.2.jpg', '4.1/4.1.3.jpg', '4.1/4.1.4.jpg', '4.1/4.1.5.jpg'],
        status: 'Mới',
        description: 'Chân váy vắt chéo có nút điều chỉnh kích thước',
    },
    {
        category: 'Thời trang nữ - Quần & Chân váy',
        slug: 'thoi-trang-nu-quan-chan-vay',
        name: 'Chân váy jean chữ A',
        price: '149.000',
        sale: '109.000',
        size: 'S',
        noteSize: 'Dưới 50kg',
        color: 'Jeans',
        amount: 1,
        material: 'Jeans',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '5.1/5.1.4.jpg',
        other_img: ['5.1/5.1.1.png', '5.1/5.1.2.jpg', '5.1/5.1.3.jpg', '5.1/5.1.4.jpg', '5.1/5.1.5.jpg'],
        status: 'Mới',
        description: 'Chân váy được phối 2 màu đạm nhạt tạo sự khác biệt',
    },
    {
        category: 'Thời trang nữ - Quần & Chân váy',
        slug: 'thoi-trang-nu-quan-chan-vay',
        name: 'Chân váy jean dài',
        price: '149.000',
        sale: '109.000',
        size: 'M',
        noteSize: 'Dưới 55kg',
        color: 'Jeans',
        amount: 1,
        material: 'Jeans',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '6.1/6.1.6.jpg',
        other_img: [
            '6.1/6.1.1.png',
            '6.1/6.1.2.jpg',
            '6.1/6.1.3.jpg',
            '6.1/6.1.4.jpg',
            '6.1/6.1.5.jpg',
            '6.1/6.1.6.jpg',
        ],
        status: 'Mới',
        description: 'Chân váy được may từ các mảnh vải khác nhau tạo nên sự đặc biệt của sản phẩm',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo trắng xẻ lưng',
        price: '129.000',
        sale: '98.000',
        size: 'freesize',
        noteSize: 'Dưới 60kg',
        color: 'Trắng',
        amount: 1,
        material: 'Voan lụa dày',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '2/2.2.jpg',
        other_img: ['2/2.1.png', '2/2.2.jpg', '2/2.3.jpg', '2/2.4.jpg', '2/2.5.jpg'],
        status: 'Mới',
        description: 'Áo freesize rộng, vải dày dặn',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo jean',
        price: '109.000',
        sale: '89.000',
        size: 'S',
        noteSize: 'Dưới 52kg',
        color: 'Jeans',
        amount: 1,
        material: 'Jeans',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '3/3.3.jpg',
        other_img: ['3/3.1.png', '3/3.2.jpg', '3/3.3.jpg', '3/3.4.jpg', '3/3.5.jpg'],
        status: 'Mới',
        description: '',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo blazer',
        price: '179.000',
        sale: '119.000',
        size: 'freesize',
        noteSize: 'Dưới 65kg',
        color: 'Xanh mint',
        amount: 1,
        material: '',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '4/4.5.jpg',
        other_img: ['4/4.1.png', '4/4.2.jpg', '4/4.3.jpg', '4/4.4.jpg', '4/4.5.jpg'],
        status: 'Mới',
        description: 'Áo 2 lớp dày dặn',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo trắng trễ vai',
        price: '129.000',
        sale: '98.000',
        size: 'freesize',
        noteSize: 'Dưới 58kg',
        color: 'Trắng',
        amount: 1,
        material: 'Voan mềm mát',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '5/5.2.jpg',
        other_img: ['5/5.1.png', '5/5.2.jpg', '5/5.3.jpg', '5/5.4.jpg', '5/5.5.jpg', '5/5.6.jpg'],
        status: 'Mới',
        description: 'Áp trễ vai có dây. dáng tay xòe',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo sơ mi trắng',
        price: '129.000',
        sale: '89.000',
        size: 'freesize',
        noteSize: 'Dưới 60kg',
        color: 'Trắng',
        amount: 1,
        material: 'Vải thô',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '6/6.5.jpg',
        other_img: ['6/6.1.png', '6/6.2.jpg', '6/6.3.jpg', '6/6.4.jpg', '6/6.5.jpg'],
        status: 'Mới',
        description: 'Áo form xuông, dễ phối đồ',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo xô Hàn',
        price: '109.000',
        sale: '85.000',
        size: 'freesize',
        noteSize: 'Dưới 52kg',
        color: 'Trắng',
        amount: 0,
        material: 'Vải xô',
        facility: [
            {
                name: 'ĐH SPKT',
                address: '1 Võ Văn Ngân, Phường Linh Chiểu, Thành phố Thủ Đức',
            },
        ],
        img: '7/7.1.jpg',
        other_img: ['7/7.1.jpg', '7/7.2.jpg', '7/7.3.jpg', '7/7.4.jpg'],
        status: 'Như mới',
        description: '',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo sơ mi trắng basic',
        price: '109.000',
        sale: '85.000',
        size: 'M',
        noteSize: 'Dưới 55kg',
        color: 'Trắng',
        amount: 0,
        material: 'thô',
        facility: [
            {
                name: 'ĐH SPKT',
                address: '1 Võ Văn Ngân, Phường Linh Chiểu, Thành phố Thủ Đức',
            },
        ],
        img: '8/8.1.jpg',
        other_img: ['8/8.1.jpg', '8/8.2.jpg', '8/8.3.jpg', '8/8.4.jpg'],
        status: 'Như mới',
        description: '',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo cổ kiểu đính ngọc',
        price: '95.000',
        sale: '85.000',
        size: 'M',
        noteSize: 'Dưới 58kg',
        color: 'Trắng sữa',
        amount: 0,
        material: 'lụa dày',
        facility: [
            {
                name: 'ĐH SPKT',
                address: '1 Võ Văn Ngân, Phường Linh Chiểu, Thành phố Thủ Đức',
            },
        ],
        img: '9/9.1.jpg',
        other_img: ['9/9.1.jpg', '9/9.2.jpg', '9/9.3.jpg', '9/9.4.jpg', '9/9.5.jpg'],
        status: 'Như mới',
        description: '',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo giản đơn cột nơ',
        price: '99.000',
        sale: '85.000',
        size: 'S',
        noteSize: 'Dưới 55kg',
        color: 'Trắng',
        amount: 0,
        material: 'gân thô',
        facility: [
            {
                name: 'ĐH Ngân hàng',
                address: '56 Hoàng Diệu II, Q.Thủ Đức, TP.Hồ Chí Minh',
            },
        ],
        img: '10/10.1.jpg',
        other_img: ['10/10.1.jpg', '10/10.2.jpg', '10/10.3.jpg', '10/10.4.jpg', '10/10.5.jpg'],
        status: 'Như mới',
        description: '',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo sơ mi đơn giản, phối chỉ đen',
        price: '109.000',
        sale: '85.000',
        size: 'M',
        noteSize: 'Dưới 52kg',
        color: 'Trắng',
        amount: 0,
        material: 'lụa mềm',
        facility: [
            {
                name: 'ĐH SPKT',
                address: '1 Võ Văn Ngân, Phường Linh Chiểu, Thành phố Thủ Đức',
            },
        ],
        img: '11/11.1.jpg',
        other_img: ['11/11.1.jpg', '11/11.2.jpg', '11/11.3.jpg', '11/11.4.jpg'],
        status: 'Như mới',
        description: 'Áo túi hộp, vải mát, dễ phối đồ',
    },
    {
        category: 'Thời trang nữ - Áo nữ',
        slug: 'thoi-trang-nu-ao-nu',
        name: 'Áo bánh bèo cột nơ ngang eo',
        price: '98.000',
        sale: '85.000',
        size: 'S',
        noteSize: 'Dưới 50kg',
        color: 'Trắng',
        amount: 0,
        material: 'lụa mỏng',
        facility: [
            {
                name: 'ĐH SPKT',
                address: '1 Võ Văn Ngân, Phường Linh Chiểu, Thành phố Thủ Đức',
            },
        ],
        img: '12/12.1.jpg',
        other_img: ['12/12.1.jpg', '12/12.2.jpg', '12/12.3.jpg', '12/12.4.jpg'],
        status: 'Như mới',
        description: '',
    },
    {
        category: 'Khác',
        slug: 'other',
        name: 'Áo trắng túi hộp',
        price: '109.000',
        sale: '89.000',
        size: 'freesize',
        noteSize: 'Dưới 60kg',
        color: 'Trắng',
        amount: 1,
        material: 'Voan mỏng',
        facility: [],
        img: '1.1/1.1.2.jpg',
        other_img: ['1.1/1.1.1.png', '1.1/1.1.2.jpg', '1.1/1.1.3.jpg'],
        status: 'Mới',
        description: 'Chân váy vải tuyết mưa dày dặn, có quần áo phía trong',
    },
];

const middleware = (products) => {
    const base64_encode = (path) => {
        const ext = path.substring(path.lastIndexOf('.')).split('.')[1];
        const base64 = fs.readFileSync(`${__dirname}/${path}`, 'base64');

        return { ext, base64 };
    };

    const newproducts = products.map(el => {
        const { ext, base64 } = base64_encode(el.img);
        el.img = `data:${ext};base64,${base64}`;

        el.other_img = el.other_img.map(other_img_path => {
            const { ext, base64 } = base64_encode(other_img_path);
            return `data:${ext};base64,${base64}`;
        });
      
        return el;
    });

    return newproducts;
};

module.exports = middleware(products);